"use strict";(self.webpackChunkcommunity_box=self.webpackChunkcommunity_box||[]).push([[116],{6116:function(e,s,r){r.r(s);var a=r(4165),t=r(5861),n=r(4942),o=r(1413),l=r(9439),i=r(2791),c=r(6251),d=r(9434),u=r(826),m=r(7964),p=r(9658),x=r(3746),f=r(165),h=r(3044),g=r(3154),w=r(5353),y=r(370),N=r(3329);s.default=function(){var e=(0,d.I0)(),s=(0,d.v9)((function(e){return e.auth.user.photoURL})),r=(0,d.v9)((function(e){return e.auth.user.uid})),b=(0,d.v9)((function(e){return e.auth.user.displayName})),v=(0,d.v9)((function(e){return e.auth.user.email})),j=(0,d.v9)((function(e){return e.auth.user.country})),Z=(0,d.v9)((function(e){return e.auth.user.location})),P=(0,d.v9)((function(e){return e.auth.user.phoneNumber})),k=(0,i.useState)({displayName:b,email:v,country:j,location:Z,phoneNumber:P,oldPassword:"",newPassword:"",confirmPassword:""}),C=(0,l.Z)(k,2),S=C[0],L=C[1],z=(0,i.useState)({update:!1,pwd:!1}),F=(0,l.Z)(z,2),M=F[0],U=F[1],E=(0,i.useState)({pwd:!1,delete:!1,update:!1,upload:!1}),R=(0,l.Z)(E,2),_=R[0],A=R[1],D=(0,i.useState)({}),O=(0,l.Z)(D,2),B=O[0],I=O[1],T=(0,i.useState)({}),V=(0,l.Z)(T,2),q=V[0],H=V[1],$=function(e){H((0,o.Z)((0,o.Z)({},q),{},(0,n.Z)({},e,!q[e])))},G=function(){L({oldPassword:"",newPassword:"",confirmPassword:""}),U({pwd:!1})},J=function(e){var s=e.target,r=s.name,a=s.value,t=(0,o.Z)((0,o.Z)({},S),{},(0,n.Z)({},r,a));L(t),K(e);["displayName","email","country","location","phoneNumber","oldPassword","newPassword","confirmPassword"].some((function(e){return t[e]!==S[e]}))&&U("oldPassword"!==r&&"newPassword"!==r&&"confirmPassword"!==r?{update:!0}:{pwd:!0})},K=function(e){var s=e.target,r=s.name,a=s.value;I((0,o.Z)((0,o.Z)({},B),{},(0,n.Z)({},r,function(e,s){if(""===s.trim())return"".concat(e," is required");if("email"===e){if(!/\S+@\S+\.\S+/.test(s))return"Email address is invalid"}else if("phoneNumber"===e){if(!/^\+?\d+$/.test(s))return"Phone number is invalid"}else if("newPassword"===e||"oldPassword"===e||"confirmPassword"===e){if(s.length<6)return"Password must be at least 6 characters";if("confirmPassword"===e&&s!==S.newPassword)return"Passwords do not match"}return""}(r,a))))},Q=function(){var s=(0,t.Z)((0,a.Z)().mark((function s(t){var n;return(0,a.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(t.preventDefault(),!!Object.values(B).some(Boolean)){s.next=19;break}return A((0,o.Z)((0,o.Z)({},_),{},{update:!0})),n={displayName:S.displayName,email:S.email,country:S.country,location:S.location,phoneNumber:S.phoneNumber},s.prev=5,s.next=8,(0,m.ek)(r,n);case 8:A((0,o.Z)((0,o.Z)({},_),{},{update:!1})),U({update:!1}),I({general:"Profile updated successfully",type:"success",form:"update"}),e({type:"SET_USER",payload:(0,o.Z)((0,o.Z)({},S),{},{displayName:S.displayName,email:S.email,country:S.country,location:S.location,phoneNumber:S.phoneNumber})}),s.next=19;break;case 14:s.prev=14,s.t0=s.catch(5),console.log(s.t0),A((0,o.Z)((0,o.Z)({},_),{},{update:!1})),I({general:s.t0.message,type:"error",form:"update"});case 19:case"end":return s.stop()}}),s,null,[[5,14]])})));return function(e){return s.apply(this,arguments)}}(),W=function(){var e=(0,t.Z)((0,a.Z)().mark((function e(s){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),!!Object.values(B).some(Boolean)){e.next=16;break}return A((0,o.Z)((0,o.Z)({},_),{},{pwd:!0})),e.prev=4,e.next=7,(0,m.Cp)(S.oldPassword,S.newPassword).then((function(e){!0===e.success?I({general:e.message,type:"success",form:"pwd"}):I({general:e.message,type:"error",form:"pwd"})})).catch((function(e){I({general:e.message,type:"error",form:"pwd"})}));case 7:G(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),I({general:null===e.t0||void 0===e.t0?void 0:e.t0.message,type:"error",form:"pwd"});case 13:return e.prev=13,A((0,o.Z)((0,o.Z)({},_),{},{pwd:!1})),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[4,10,13,16]])})));return function(s){return e.apply(this,arguments)}}(),X=function(){for(var e="#",s=0;s<6;s++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}(),Y=function(){var s=(0,t.Z)((0,a.Z)().mark((function s(t){var n;return(0,a.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(n=t.target.files[0]){s.next=3;break}return s.abrupt("return");case 3:return A((function(e){return(0,o.Z)((0,o.Z)({},e),{},{upload:!0})})),s.prev=4,s.next=7,(0,m.ow)(r,n);case 7:I({general:"Profile picture updated successfully",type:"success",form:"upload"}),e({type:"SET_USER",payload:(0,o.Z)((0,o.Z)({},S),{},{photoURL:URL.createObjectURL(n)})}),s.next=14;break;case 11:s.prev=11,s.t0=s.catch(4),I({general:s.t0.message,type:"error",form:"upload"});case 14:return s.prev=14,A((function(e){return(0,o.Z)((0,o.Z)({},e),{},{upload:!1})})),t.target.value="",s.finish(14);case 18:case"end":return s.stop()}}),s,null,[[4,11,14,18]])})));return function(e){return s.apply(this,arguments)}}();return w.I.currentUser?(0,N.jsxs)(c.Z,{title:"Account Settings",children:[B.general&&"upload"===B.form&&(0,N.jsx)(p.Z,{className:"mb-4",severity:B.type,onClose:function(){return I((0,o.Z)((0,o.Z)({},B),{},{general:""}))},sx:{mt:2},children:B.general}),(0,N.jsx)("div",{className:"relative mb-4",children:(0,N.jsxs)("div",{className:"h-40 relative cursor-pointer rounded-md overflow-hidden",style:{backgroundColor:X},onClick:function(){document.getElementById("avatar-upload").click()},children:[(0,N.jsx)("div",{className:"absolute inset-0 bg-black opacity-40"}),(0,N.jsx)("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 transition-opacity hover:opacity-100 w-full h-full",children:(0,N.jsx)("p",{className:"text-white text-xl font-semibold",children:"Upload Profile Avatar"})}),_.upload&&(0,N.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,N.jsx)(u.aN,{width:250,height:250})}),(0,N.jsx)("span",{className:"absolute top-0 right-0 m-4 bg-white p-2 rounded-full",children:(0,N.jsx)(g.Z,{})}),(0,N.jsx)("div",{className:"absolute inset-x-0 bottom-0 p-4 text-white",children:(0,N.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,N.jsxs)("label",{className:"flex-shrink-0",children:[(0,N.jsx)("input",{type:"file",accept:"image/*",id:"avatar-upload",className:"sr-only",onChange:Y}),(0,N.jsx)(h.Z,{alt:"User avatar",src:s,className:"w-16 h-16 rounded-full ring-2 ring-white"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("h1",{className:"text-2xl font-semibold",children:b}),(0,N.jsx)("p",{className:"text-lg"})]})]})})]})}),(0,N.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:px-4",children:[(0,N.jsx)("div",{className:"col-span-1",children:(0,N.jsxs)("form",{onSubmit:Q,className:"flex flex-col gap-4",children:[(0,N.jsx)("h2",{className:"text-2xl font-bold text-gray-500",children:"Profile Details"}),(0,N.jsx)("p",{className:"text-gray-500",children:"Change your profile details"}),B.general&&"update"===B.form&&(0,N.jsx)(p.Z,{severity:B.type,onClose:function(){return I((0,o.Z)((0,o.Z)({},B),{},{general:""}))},sx:{mt:2},children:B.general}),(0,N.jsxs)("div",{className:"mt-4",children:[(0,N.jsx)("label",{htmlFor:"displayName",className:"text-gray-500",children:"Display Name"}),(0,N.jsx)("input",{type:"text",id:"displayName",name:"displayName",value:S.displayName,onChange:J,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 ".concat(B.displayName?"border-red-500":"")}),B.displayName&&(0,N.jsx)("p",{className:"text-red-500 text-xs mt-1",children:B.displayName})]}),(0,N.jsxs)("div",{className:"mt-4",children:[(0,N.jsx)("label",{htmlFor:"email",className:"text-gray-500",children:"Email"}),(0,N.jsx)("input",{type:"email",id:"email",name:"email",value:S.email,onChange:J,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 ".concat(B.email?"border-red-500":"")}),B.email&&(0,N.jsx)("p",{className:"text-red-500 text-xs mt-1",children:B.email})]}),(0,N.jsxs)("div",{className:"mt-4",children:[(0,N.jsx)("label",{htmlFor:"country",className:"text-gray-500",children:"Country"}),(0,N.jsx)("input",{type:"text",id:"_country",name:"country",value:S.country,onChange:J,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 ".concat(B.country?"border-red-500":"")}),B.country&&(0,N.jsx)("p",{className:"text-red-500 text-xs mt-1",children:B.country})]}),(0,N.jsxs)("div",{className:"mt-4",children:[(0,N.jsx)("label",{htmlFor:"location",className:"text-gray-500",children:"Address / location"}),(0,N.jsx)("input",{type:"text",id:"_location",name:"location",value:S.location,onChange:J,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 ".concat(B.location?"border-red-500":"")}),B.location&&(0,N.jsx)("p",{className:"text-red-500 text-xs mt-1",children:B.location})]}),(0,N.jsxs)("div",{className:"mt-4",children:[(0,N.jsx)("label",{htmlFor:"phoneNumber",className:"text-gray-500",children:"Phone Number"}),(0,N.jsx)("input",{type:"text",id:"phone_Number",name:"phoneNumber",value:S.phoneNumber,onChange:J,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 ".concat(B.phoneNumber?"border-red-500":"")}),B.phoneNumber&&(0,N.jsx)("p",{className:"text-red-500 text-xs mt-1",children:B.phoneNumber})]}),(0,N.jsxs)("div",{className:"mt-4 flex items-center gap-2",children:[_.update?(0,N.jsx)(u.aN,{width:200,height:200}):(0,N.jsx)("button",{className:"bg-green-700 text-white px-4 py-2 rounded-md",onClick:Q,children:"Save Changes"}),M.update&&(0,N.jsx)("button",{className:"bg-gray-500 text-white px-4 py-2 rounded-md",onClick:function(){L({displayName:b,email:v,country:j,location:Z,phoneNumber:P}),U({update:!1})},children:"Cancel"})]})]})}),(0,N.jsx)("div",{className:"col-span-1",children:(0,N.jsxs)("form",{className:"flex flex-col gap-4",children:[(0,N.jsx)("h2",{className:"text-2xl font-bold text-gray-500",children:"Password & Security Reset"}),(0,N.jsx)("p",{className:"text-gray-500",children:"Change your password"}),B.general&&"pwd"===B.form&&(0,N.jsx)(p.Z,{severity:B.type,onClose:function(){return I((0,o.Z)((0,o.Z)({},B),{},{general:""}))},sx:{mt:2},children:B.general}),(0,N.jsxs)("div",{className:"mt-4",children:[(0,N.jsx)("label",{htmlFor:"newPassword",className:"text-gray-500",children:"Old Password"}),(0,N.jsxs)("div",{className:"relative",children:[(0,N.jsx)("input",{type:q.oldpassword?"text":"password",id:"oldpassword",name:"oldPassword",value:S.oldPassword,onChange:J,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 ".concat(B.oldpassword?"border-red-500":"")}),(0,N.jsx)("div",{onClick:function(){return $("oldpassword")},className:"absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5 cursor-pointer",children:q.oldpassword?(0,N.jsx)(x.Z,{}):(0,N.jsx)(f.Z,{})})]}),B.oldpassword&&(0,N.jsx)("p",{className:"text-red-500 text-xs mt-1",children:B.oldpassword})]}),(0,N.jsxs)("div",{className:"mt-4",children:[(0,N.jsx)("label",{htmlFor:"newPassword",className:"text-gray-500",children:"New Password"}),(0,N.jsxs)("div",{className:"relative",children:[(0,N.jsx)("input",{type:q.newPassword?"text":"password",id:"newPassword",name:"newPassword",value:S.newPassword,onChange:J,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 ".concat(B.newPassword?"border-red-500":"")}),(0,N.jsx)("div",{onClick:function(){return $("newPassword")},className:"absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5 cursor-pointer",children:q.newPassword?(0,N.jsx)(x.Z,{}):(0,N.jsx)(f.Z,{})})]}),B.newPassword&&(0,N.jsx)("p",{className:"text-red-500 text-xs mt-1",children:B.newPassword})]}),(0,N.jsxs)("div",{className:"mt-4",children:[(0,N.jsx)("label",{htmlFor:"confirmPassword",className:"text-gray-500",children:"Confirm Password"}),(0,N.jsxs)("div",{className:"relative",children:[(0,N.jsx)("input",{type:q.confirmPassword?"text":"password",id:"confirmPassword",name:"confirmPassword",value:S.confirmPassword,onChange:J,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 ".concat(B.confirmPassword?"border-red-500":"")}),(0,N.jsx)("div",{onClick:function(){return $("confirmPassword")},className:"absolute inset-y-0 right-0 pr-3 flex items-center text-sm leading-5 cursor-pointer",children:q.confirmPassword?(0,N.jsx)(x.Z,{}):(0,N.jsx)(f.Z,{})})]}),B.confirmPassword&&(0,N.jsx)("p",{className:"text-red-500 text-xs mt-1",children:B.confirmPassword})]}),(0,N.jsxs)("div",{className:"mt-4",children:[(0,N.jsx)("button",{onClick:W,className:"bg-red-700 text-white px-4 py-2 rounded-md",children:_.pwd?(0,N.jsx)(u.aN,{width:200,height:200}):" Reset password"}),M.pwd&&(0,N.jsx)("button",{type:"button",className:"bg-gray-500 text-white px-4 py-2 rounded-md ml-4",onClick:G,children:"Cancel"})]})]})})]})]}):(0,N.jsx)(y.k,{})}},3154:function(e,s,r){var a=r(4836);s.Z=void 0;var t=a(r(5649)),n=r(3329),o=(0,t.default)((0,n.jsx)("path",{d:"M7.5 5.6 10 7 8.6 4.5 10 2 7.5 3.4 5 2l1.4 2.5L5 7zm12 9.8L17 14l1.4 2.5L17 19l2.5-1.4L22 19l-1.4-2.5L22 14zM22 2l-2.5 1.4L17 2l1.4 2.5L17 7l2.5-1.4L22 7l-1.4-2.5zm-7.63 5.29a.9959.9959 0 0 0-1.41 0L1.29 18.96c-.39.39-.39 1.02 0 1.41l2.34 2.34c.39.39 1.02.39 1.41 0L16.7 11.05c.39-.39.39-1.02 0-1.41l-2.33-2.35zm-1.03 5.49-2.12-2.12 2.44-2.44 2.12 2.12-2.44 2.44z"}),"AutoFixHigh");s.Z=o},3746:function(e,s,r){var a=r(4836);s.Z=void 0;var t=a(r(5649)),n=r(3329),o=(0,t.default)((0,n.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility");s.Z=o},165:function(e,s,r){var a=r(4836);s.Z=void 0;var t=a(r(5649)),n=r(3329),o=(0,t.default)((0,n.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");s.Z=o}}]);
//# sourceMappingURL=116.ae0ebbf8.chunk.js.map